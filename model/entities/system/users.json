{
  "name": "users",
  "label": "Users",
  "recordLabel": "fields/fullName",
  "settings": {
    "auditLogs": {
      "enabled": true,
      "deletionPolicy": "retain",
      "retentionPeriod": "2M",
      "userContext": {
        "recordCreated": true,
        "recordUpdated": true,
        "recordDeleted": true,
        "actionExecuted": true
      },
      "scriptContext": {
        "recordCreated": true,
        "recordUpdated": true,
        "recordDeleted": true,
        "actionExecuted": true
      }
    }
  },
  "fields": [
    {
      "name": "firstName",
      "label": "First name",
      "type": "text",
      "required": true
    },
    {
      "name": "lastName",
      "label": "Last name",
      "type": "text",
      "required": true
    },
    {
      "name": "fullName",
      "label": "Full name",
      "type": "text",
      "required": true,
      "calculation": "js/fullNameFieldCalculation"
    },
    {
      "name": "email",
      "label": "Email",
      "type": "email",
      "required": true,
      "unique": true,
      "indexable": true
    },
    {
      "name": "emailStandardized",
      "label": "Email standardized",
      "type": "email",
      "calculation": "js/emailFieldCalculation",
      "uiOptions": {
        "visible": false
      }
    },
    {
      "name": "status",
      "label": "Status",
      "type": "choice",
      "choices": [
        {
          "name": "active",
          "label": "Active"
        },
        {
          "name": "inactive",
          "label": "Inactive"
        },
        {
          "name": "blocked",
          "label": "Blocked"
        }
      ],
      "defaultValue": "active",
      "uiOptions": {
        "readOnly": "always"
      }
    },
    {
      "name": "sendWelcomeEmail",
      "label": "Send welcome email",
      "type": "boolean",
      "transient": true,
      "uiOptions": {
        "visible": "js/sendWelcomeEmailFieldVisible"
      }
    },
    {
      "name": "created",
      "label": "Created",
      "type": "dateRecordCreated"
    },
    {
      "name": "authentication",
      "label": "Authentication",
      "type": "nestedField",
      "required": true,
      "fields": [
        {
          "name": "generatePassword",
          "label": "Generate password",
          "type": "boolean",
          "defaultValue": true,
          "transient": true,
          "uiOptions": {
            "visible": "js/generatePasswordFieldVisible"
          }
        },
        {
          "name": "newPassword",
          "label": "New password",
          "type": "text",
          "transient": true,
          "sensitive": true,
          "minimumLength": 6,
          "required": "js/newPasswordFieldRequired",
          "readWriteAccess": "js/newPasswordFieldReadWriteAccess",
          "uiOptions": {
            "password": true
          }
        },
        {
          "name": "passwordConfirmation",
          "label": "Password confirmation",
          "type": "text",
          "transient": true,
          "sensitive": true,
          "minimumLength": 6,
          "required": "js/passwordConfirmationFieldRequired",
          "readWriteAccess": "js/passwordConfirmationFieldReadWriteAccess",
          "uiOptions": {
            "password": true
          }
        },
        {
          "name": "password",
          "label": "Password",
          "type": "text",
          "minimumLength": 6,
          "required": "js/passwordFieldRequired",
          "uiOptions": {
            "visible": false
          }
        },
        {
          "name": "passwordExpired",
          "label": "Password expired",
          "type": "boolean",
          "uiOptions": {
            "visible": false
          }
        },
        {
          "name": "lastPasswordChange",
          "label": "Last password change",
          "type": "dateTime",
          "uiOptions": {
            "visible": false
          }
        },
        {
          "name": "resetPasswordCode",
          "label": "Reset password code",
          "type": "text",
          "uiOptions": {
            "visible": false
          }
        },
        {
          "name": "enableTwoFactorAuthentication",
          "label": "Enable two factor authentication",
          "type": "boolean",
          "uiOptions": {
            "visible": false
          }
        },
        {
          "name": "phoneNumber",
          "label": "Phone number",
          "type": "text",
          "required": {
            "authentication.enableTwoFactorAuthentication": true
          },
          "readWriteAccess": {
            "authentication.enableTwoFactorAuthentication": true
          },
          "uiOptions": {
            "visible": false
          }
        },
        {
          "name": "twoFactorAuthenticationKey",
          "label": "TwoFactor authentication key",
          "type": "qr",
          "sensitive": true,
          "readWriteAccess": {
            "authentication.enableTwoFactorAuthentication": true
          },
          "uiOptions": {
            "visible": false
          }
        },
        {
          "name": "failedLoginAttempts",
          "label": "Failed login attempts",
          "type": "integer",
          "defaultValue": 0,
          "uiOptions": {
            "visible": false
          }
        }
      ]
    },
    {
      "name": "groups",
      "label": "Groups",
      "type": "nestedField",
      "multiplicity": "many",
      "required": true,
      "fields": [
        {
          "name": "primary",
          "label": "Primary",
          "type": "boolean"
        },
        {
          "name": "external",
          "label": "External",
          "type": "boolean"
        },
        {
          "name": "group",
          "label": "Group",
          "type": "group",
          "required": true
        }
      ]
    },
    {
      "name": "permissions",
      "label": "Permissions",
      "type": "nestedField",
      "required": true,
      "fields": [
        {
          "name": "superUser",
          "label": "Super user",
          "type": "boolean"
        },
        {
          "name": "systemUser",
          "label": "System user",
          "type": "boolean"
        },
        {
          "name": "developer",
          "label": "Developer",
          "type": "boolean"
        }
      ]
    },
    {
      "name": "localization",
      "label": "Localization",
      "type": "nestedField",
      "fields": [
        {
          "name": "timezoneMode",
          "label": "Timezone mode",
          "type": "choice",
          "defaultValue": "auto",
          "choices": [
            {
              "name": "auto",
              "label": "Auto"
            },
            {
              "name": "manual",
              "label": "Manual"
            }
          ]
        },
        {
          "name": "timezone",
          "label": "Timezone",
          "type": "text",
          "readWriteAccess": {
            "localization.timezoneMode": "manual"
          }
        },
        {
          "name": "language",
          "label": "Language",
          "type": "choice",
          "defaultValue": "english",
          "choices": [
            {
              "name": "english",
              "label": "English"
            },
            {
              "name": "spanish",
              "label": "Spanish"
            }
          ]
        }
      ]
    },
    {
      "name": "identityProviders",
      "label": "Identity providers",
      "type": "nestedField",
      "multiplicity": "many",
      "required": "js/identityProvidersFieldRequired",
      "fields": [
        {
          "name": "name",
          "label": "Name",
          "type": "text",
          "required": true
        },
        {
          "name": "externalId",
          "label": "External id",
          "type": "text"
        }
      ],
      "uiOptions": {
        "visible": false
      }
    },
    {
      "name": "integrations",
      "label": "Integrations",
      "type": "nestedField",
      "multiplicity": "many",
      "fields": [
        {
          "name": "endpoint",
          "label": "Endpoint",
          "type": "text",
          "required": true
        },
        {
          "name": "status",
          "label": "Status",
          "type": "choice",
          "choices": [
            {
              "name": "connected",
              "label": "Connected",
              "color": "success"
            },
            {
              "name": "disconnected",
              "label": "Disconnected",
              "color": "danger"
            }
          ],
          "defaultValue": "disconnected"
        },
        {
          "name": "configurationSet",
          "label": "Configuration set",
          "type": "boolean"
        },
        {
          "name": "configuration",
          "label": "Configuration",
          "type": "longText",
          "uiOptions": {
            "editRepresentation": "textArea",
            "rows": 5
          }
        }
      ],
      "uiOptions": {
        "visible": false
      }
    }
  ],
  "actions": [
    {
      "name": "resetPassword",
      "label": "Reset password",
      "type": "oneRecord",
      "actions": "js/resetPasswordActions",
      "resultAsResponse": true
    },
    {
      "name": "activate",
      "label": "Activate",
      "type": "oneRecord",
      "actions": "js/activateActions",
      "precondition": {
        "status": "inactive"
      }
    },
    {
      "name": "deactivate",
      "label": "Deactivate",
      "type": "oneRecord",
      "actions": "js/deactivateActions",
      "precondition": {
        "status": "active"
      }
    },
    {
      "name": "unblock",
      "label": "Unblock",
      "type": "oneRecord",
      "actions": "js/unblockActions",
      "precondition": {
        "status": "blocked"
      }
    }
  ]
}